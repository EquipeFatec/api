CREATE TABLE TIPO_PRODUTO (
TP_ID INT GENERATED BY DEFAULT AS IDENTITY (START with 1 INCREMENT by 1),
TP_NOME VARCHAR(100) CONSTRAINT TP_NOME_NOT_NULL NOT NULL,
CONSTRAINT PK_TP_ID PRIMARY KEY (TP_ID),
CONSTRAINT UK_TP_NOME UNIQUE (TP_NOME));

CREATE TABLE PRODUTO (
PROD_ID INT  GENERATED BY DEFAULT AS IDENTITY (START with 1 INCREMENT by 1),
TP_ID INT CONSTRAINT FK_TP_ID REFERENCES TIPO_PRODUTO(TP_ID),
PROD_NOME VARCHAR(100) CONSTRAINT PROD_NOME_NOT_NULL NOT NULL,
PROD_VALOR NUMBER(6,2) CONSTRAINT PROD_VALOR_NOT_NULL NOT NULL,
CONSTRAINT PK_PROD_ID PRIMARY KEY (PROD_ID),
CONSTRAINT UK_PROD_NOME UNIQUE (PROD_NOME));

CREATE TABLE ESTADO(
EST_ID VARCHAR(2), CONSTRAINT PK_ESTADO PRIMARY KEY (EST_ID)
);

CREATE TABLE CIDADE(
CIDADE_ID INT GENERATED BY DEFAULT AS IDENTITY (START with 1 INCREMENT by 1),
CIDADE_NOME VARCHAR(30) CONSTRAINT CIDADE_NOME_NOT_NULL NOT NULL,
EST_ID VARCHAR(2) CONSTRAINT FK_BAIRRO_EST_ID REFERENCES ESTADO(EST_ID),
CONSTRAINT PK_CIDADE_ID PRIMARY KEY (CIDADE_ID));

CREATE TABLE BAIRRO(
BAIRRO_ID INT GENERATED BY DEFAULT AS IDENTITY (START with 1 INCREMENT by 1),
BAIRRO_NOME VARCHAR(100) CONSTRAINT BAIRRO_NOME_NOT_NULL NOT NULL,
CIDADE_ID INT CONSTRAINT FK_CIDADE_ID REFERENCES CIDADE(CIDADE_ID),
CONSTRAINT PK_BAIRRO_ID PRIMARY KEY (BAIRRO_ID));

CREATE TABLE ENDERECO(
ENDERECO_ID NUMBER(20),
BAIRRO_ID INT CONSTRAINT FK_BAIRRO_ID REFERENCES BAIRRO(BAIRRO_ID),
LOGADOURO VARCHAR(128) CONSTRAINT LOGADOURO_NOT_NULL NOT NULL,
ENDERECO_NUMERO NUMBER(11) NOT NULL,
ENDERECO_COMPLEMENTO VARCHAR(255),
CONSTRAINT PK_ENDERECO_ID PRIMARY KEY (ENDERECO_ID));

CREATE TABLE CLIENTE (
CLIENTE_ID INT GENERATED BY DEFAULT AS IDENTITY (START with 1 INCREMENT by 1),
CLIENTE_NOME VARCHAR(100) CONSTRAINT CLIENTE_NOME_NOT_NULL NOT NULL,
CLIENTE_SOBRENOME VARCHAR(100) CONSTRAINT CLIENTE_SOBRENOME_NOT_NULL NOT NULL,
CLIENTE_TELEFONE LONG,
CLIENTE_EMAIL VARCHAR(250),
ENDERECO_ID NUMBER(20) CONSTRAINT FK_ENDERECO_ID REFERENCES ENDERECO(ENDERECO_ID),
CONSTRAINT PK_CLIENTE_ID PRIMARY KEY (CLIENTE_ID)
);

CREATE TABLE TIPO_PAGAMENTO(
TIPO_PAG_ID INT GENERATED BY DEFAULT AS IDENTITY (START with 1 INCREMENT by 1),
TIPO_PAG_NOME VARCHAR(25) NOT NULL,
CONSTRAINT PK_TIPO_PAG_ID PRIMARY KEY (TIPO_PAG_ID));

CREATE TABLE VENDA(
VENDA_ID INT GENERATED BY DEFAULT AS IDENTITY (START with 1 INCREMENT by 1),
CLIENTE_ID INT CONSTRAINT FK_CLIENTE_ID REFERENCES CLIENTE(CLIENTE_ID),
VENDA_DATA TIMESTAMP NOT NULL,
VENDA_PAGAMENTO_ID INT CONSTRAINT FK_PAGAMENTO_ID REFERENCES TIPO_PAGAMENTO(TIPO_PAG_ID),
VENDA_DESCONTO INT,
CONSTRAINT PK_VENDA_ID PRIMARY KEY (VENDA_ID)
);

CREATE TABLE ITEM_VENDA(
ITV_ID INT GENERATED BY DEFAULT AS IDENTITY (START with 1 INCREMENT by 1),
PROD_ID INT CONSTRAINT FK_PRODUTO_ID REFERENCES PRODUTO(PROD_ID),
VENDA_ID INT CONSTRAINT FK_VENDA_ID REFERENCES VENDA(VENDA_ID),
ITV_QUANTIDADE INT NOT NULL,
ITV_VALOR NUMBER(6,2) NOT NULL,
CONSTRAINT PK_ITV_ID PRIMARY KEY (ITV_ID));

insert into tipo_produto (tp_id,tp_nome) values (null,"Sapatilha");
insert into tipo_produto (tp_id,tp_nome) values (2,"Tênis");
insert into tipo_produto (tp_id,tp_nome) values (3,"Chinelo");

insert into produto (prod_id,tp_id,prod_nome,prod_valor) values (1,"feminino","Sapatilha",45.00);
insert into produto (prod_id,tp_id,prod_nome,prod_valor) values (2,"feminino","Tênis",450.00);
insert into produto (prod_id,tp_id,prod_nome,prod_valor) values (3,"infantil","Chinelo",55.00);